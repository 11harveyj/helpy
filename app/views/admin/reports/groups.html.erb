<% title "Activity Report" %>

<div class="report-header row">

  <div class="col-md-12 clearfix">
    <h2>
      <%= t('activity_report', site_name: AppSettings['settings.site_name'], default: "Activity Report") %>: <%= content_tag :span, @interval.sentence_case, class: 'hidden-sm hidden-xs' %>
      <div class="dropdown pull-right">
        <button class="btn btn-default dropdown-toggle less-important" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
          <%= @interval.sentence_case %>
          <span class="caret"></span>
        </button>
        <%= render partial: 'admin/reports/date_selector', locals: { path: "admin_reports_path" } %>
      </div>
    </h2>
  </div>


</div>
  <br/><br/><br/>
<div class="row">
  <div class="col-md-2">
    <%= render partial: 'admin/reports/reports_nav' %>
  </div>
  <div class="col-md-10">
    <div class="row">
      <div class="big-stats">
        <div class="col-md-3 text-center">
          <h2><%= @total_tickets %></h2>
            <span class="tiny-header">New Tickets</span>
        </div>
        <div class="col-md-3 text-center">
          <h2><%= @total_replies %></h2>
            <span class="tiny-header">Total Replies</span>
        </div>
        <div class="col-md-3 text-center">
          <h2><%= @total_activities %></h2>
            <span class="tiny-header">Actions</span>
        </div>
        <div class="col-md-3 text-center">
          <h2><%= @total_closed %></h2>
            <span class="tiny-header">Closed</span>
        </div>
      </div>
      <div class="col-md-12">
        <%= area_chart [
          { name: 'Tickets', data: @tickets },
          { name: 'Closed', data: @closed },
          { name: 'Actions', data: @actions },
          ],
          legend: "bottom",
          title: "Tickets Received",
          library: { pointRadius: 0 }
          %>

        <%#= pie_chart [
          # ["Closed", @scoped_stats.sum(:number_closed)],
          ["Unanswered", @scoped_stats.sum(:number_of_tickets)-@scoped_stats.sum(:number_closed)],
          ["Responded", @scoped_stats.sum(:number_of_tickets)-@scoped_stats.sum(:responded)]
          ], library: {cutoutPercentage: 50} %>
      </div>
    </div>
    <br/>
    <table>
      <col width="40%">
      <col width="30%">
      <col width="30%">

      <tr>
        <td>New Tickets</td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>Total Actions</td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>Open Tickets</td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td>Tickets Closed</td>
        <td></td>
        <td></td>
      </td>
    </table>

    <!-- <div class="row">
      <div class="col-md-6">
        <%= pie_chart assigned_agent_stats(@scoped_stats), title: "Assigned Agents" %>
      </div>
      <div class="col-md-6">
        <%= pie_chart tickets_by_group(@scoped_stats), title: "Groups" %>
      </div>
    </div> -->
  </div>
</div>
